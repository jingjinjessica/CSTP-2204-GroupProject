<!DOCTYPE html>
<!-- Created By CodingNepal -->
<html lang="en">
   <%- include('../partials/head'); -%>
   <meta charset="utf-8">
   <title>Responsive Chat Box Design | CodingNepal</title>
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.2/jquery.min.js" integrity="sha512-ew6biq+ZLL9Oatatxp3TMwzqfYWjPNVj555KxiE2mV5Sc2/1Z5SOWSbViBH+KXU788ESsXDa5m0cgRKTBqO44w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
   <body>
      <input type="checkbox" id="click">
      <label for="click">
      <i class="fab fa-facebook-messenger"></i>
      <i class="fas fa-times"></i>
      </label>
      <div class="wrapper">
         <div class="head-text">
            Let's chat? - Online
         </div>
         <div class="chat-box">
            <!-- <div class="desc-text">
               Please fill out the form below to start chatting with the next available agent.
            </div> -->
            <form action="#">
               <div class="field">
                  <input type="text" placeholder="Your Name" required>
               </div>
               <div class="field">
                  <input type="email" placeholder="Email Address" required>
               </div>
               <div class="field textarea">
                  <textarea cols="30" rows="10" placeholder="Explain your queries.." required></textarea>
               </div>
               <div class="field">
                  <button type="submit">Start Chat</button>
               </div>
            </form>
         </div>
      </div>



      <!--  -->
      <div id="live-chat">
         <header class="clearfix">
            <!-- <a href="#" class="chat-close">x</a> -->
            <h4><span aria-hidden="true" class="icon-bubble"></span> Chat</h4>
            <!-- <span class="chat-message-counter">3</span> -->
   
         </header>
   
         <div class="chat">
               <div id="chatbox">
                   <div id="friendslist">
                       <div id="friends">
                           <div class="friend">
                               <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/245657/1_copy.jpg" />
                               <p>
                                   <strong>Miro Badev</strong>
                                   <span>mirobadev@gmail.com</span>
                               </p>
                               <div class="status available"></div>
                           </div>
   
                           <div id="search">
                               <input type="text" id="searchfield" value="Search contacts..." />
                           </div>
   
                       </div>                
   
                   </div>	
   
                   <div id="chatview" class="p1">    	
                       <div id="profile">
   
                           <div id="close">
                               <div class="cy"></div>
                               <div class="cx"></div>
                           </div>
   
                           <p>Miro Badev</p>
                           <span>miro@badev@gmail.com</span>
                       </div>
                       <div id="chat-messages">
                           <label>Thursday 02</label>
   
                           <div class="message">
                               <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/245657/1_copy.jpg" />
                               <div class="bubble">
                                   Really cool stuff!
                                   <div class="corner"></div>
                                   <span>3 min</span>
                               </div>
                           </div>
   
                           <div class="message right">
                               <img src="https://s3-us-west-2.amazonaws.com/s.cdpn.io/245657/2_copy.jpg" />
                               <div class="bubble">
                                   Can you share a link for the tutorial?
                                   <div class="corner"></div>
                                   <span>1 min</span>
                               </div>
                           </div>
                       </div>
   
                       <div id="sendmessage">
                           <input type="text" value="Send message..." />
                           <button id="send"></button>
                       </div>
   
                   </div>        
               </div>	
               <!-- end live-chat -->
   
         </div> <!-- end chat -->
   
      </div> <!-- end live-chat -->
   

   </body>
</html>
<script>
   (function() {

   $('#live-chat header').on('click', function() {

      $('.chat').slideToggle(300, 'swing');
      $('.chat-message-counter').fadeToggle(300, 'swing');

   });

   $('.chat-close').on('click', function(e) {

      e.preventDefault();
      $('#live-chat').fadeOut(300);

   });

   }) ();

   $(document).ready(function(){

   var preloadbg = document.createElement("img");
   preloadbg.src = "https://s3-us-west-2.amazonaws.com/s.cdpn.io/245657/timeline1.png";

   $("#searchfield").focus(function(){
      if($(this).val() == "Search contacts..."){
         $(this).val("");
      }
   });
   $("#searchfield").focusout(function(){
      if($(this).val() == ""){
         $(this).val("Search contacts...");
         
      }
   });

   $("#sendmessage input").focus(function(){
      if($(this).val() == "Send message..."){
         $(this).val("");
      }
   });
   $("#sendmessage input").focusout(function(){
      if($(this).val() == ""){
         $(this).val("Send message...");
         
      }
   });
      

   $(".friend").each(function(){		
      $(this).click(function(){
         var childOffset = $(this).offset();
         var parentOffset = $(this).parent().parent().offset();
         var childTop = childOffset.top - parentOffset.top;
         var clone = $(this).find('img').eq(0).clone();
         var top = childTop+12+"px";
         
         $(clone).css({'top': top}).addClass("floatingImg").appendTo("#chatbox");									
         
         setTimeout(function(){$("#profile p").addClass("animate");$("#profile").addClass("animate");}, 100);
         setTimeout(function(){
            $("#chat-messages").addClass("animate");
            $('.cx, .cy').addClass('s1');
            setTimeout(function(){$('.cx, .cy').addClass('s2');}, 100);
            setTimeout(function(){$('.cx, .cy').addClass('s3');}, 200);			
         }, 150);														
         
         $('.floatingImg').animate({
            'width': "50px",
            'left':'15px',
            'top':'20px'
         }, 200);
         
         var name = $(this).find("p strong").html();
         var email = $(this).find("p span").html();														
         $("#profile p").html(name);
         $("#profile span").html(email);			
         
         $(".message").not(".right").find("img").attr("src", $(clone).attr("src"));									
         $('#friendslist').fadeOut();
         $('#chatview').fadeIn();
      
         
         $('#close').unbind("click").click(function(){				
            $("#chat-messages, #profile, #profile p").removeClass("animate");
            $('.cx, .cy').removeClass("s1 s2 s3");
            $('.floatingImg').animate({
               'width': "40px",
               'top':top,
               'left': '12px'
            }, 200, function(){$('.floatingImg').remove()});				
            
            setTimeout(function(){
               $('#chatview').fadeOut();
               $('#friendslist').fadeIn();				
            }, 50);
         });
         
      });
   });			
   });
</script>